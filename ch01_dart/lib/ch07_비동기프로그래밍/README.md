# -------------------------------------------
# 07ë‹¨ê³„: ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°
# -------------------------------------------

## ğŸ“š í•™ìŠµ ëª©í‘œ

ì´ ë‹¨ê³„ì—ì„œëŠ” Dartì˜ ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì„ í•™ìŠµí•©ë‹ˆë‹¤:
- Future ì´í•´ì™€ ì‚¬ìš©
- async/await íŒ¨í„´
- ì—¬ëŸ¬ Future ì²˜ë¦¬ (ìˆœì°¨/ë³‘ë ¬)
- ì—ëŸ¬ ì²˜ë¦¬
- ì‹¤ì „ í™œìš© ì˜ˆì œ

---

# -------------------------------------------
# 1. Futureë€?
# -------------------------------------------

## 1.1 ë™ê¸° vs ë¹„ë™ê¸°

**ë™ê¸° (Synchronous):**
```dart
String data = fetchData();  // ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°
print(data);
```

- ì½”ë“œê°€ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰
- í•œ ì‘ì—…ì´ ëë‚˜ì•¼ ë‹¤ìŒ ì‘ì—… ì‹œì‘
- ë¸”ë¡œí‚¹ ë°œìƒ

**ë¹„ë™ê¸° (Asynchronous):**
```dart
Future<String> data = fetchData();  // ì¦‰ì‹œ ë°˜í™˜
data.then((value) => print(value));  // ì™„ë£Œë˜ë©´ ì‹¤í–‰
```

- ì‘ì—…ì„ ì‹œì‘í•˜ê³  ì¦‰ì‹œ ë°˜í™˜
- ë‹¤ë¥¸ ì‘ì—…ì„ ê³„ì† ìˆ˜í–‰ ê°€ëŠ¥
- ì™„ë£Œë˜ë©´ ì½œë°± ì‹¤í–‰

## 1.2 Futureì˜ í•„ìš”ì„±

- ë„¤íŠ¸ì›Œí¬ ìš”ì²­ (API í˜¸ì¶œ)
- íŒŒì¼ ì½ê¸°/ì“°ê¸°
- ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬
- íƒ€ì´ë¨¸

ì´ëŸ° ì‘ì—…ë“¤ì€ ì‹œê°„ì´ ê±¸ë¦¬ë¯€ë¡œ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.

---

# -------------------------------------------
# 2. Future ê¸°ë³¸
# -------------------------------------------

## 2.1 Future ìƒì„±

```dart
Future<String> fetchData() async {
  await Future.delayed(Duration(seconds: 1));
  return 'ë°ì´í„° ë¡œë“œ ì™„ë£Œ';
}
```

- `Future<T>`: T íƒ€ì…ì˜ ê°’ì„ ë°˜í™˜í•˜ëŠ” ë¹„ë™ê¸° ì‘ì—…
- `async`: ë¹„ë™ê¸° í•¨ìˆ˜ í‘œì‹œ
- `await`: Future ì™„ë£Œ ëŒ€ê¸°

## 2.2 Future ì‚¬ìš© - then

```dart
fetchData().then((data) {
  print('ë°ì´í„°: $data');
}).catchError((error) {
  print('ì—ëŸ¬: $error');
});
```

- `then`: ì„±ê³µ ì‹œ ì‹¤í–‰
- `catchError`: ì—ëŸ¬ ì‹œ ì‹¤í–‰
- ì²´ì´ë‹ ê°€ëŠ¥

---

# -------------------------------------------
# 3. async/await
# -------------------------------------------

## 3.1 ê¸°ë³¸ ì‚¬ìš©ë²•

```dart
Future<void> loadData() async {
  String data = await fetchData();
  print('ë°ì´í„°: $data');
}
```

**ì¥ì :**
- ë™ê¸° ì½”ë“œì²˜ëŸ¼ ì½ê¸° ì‰¬ì›€
- ì—ëŸ¬ ì²˜ë¦¬ ê°„ë‹¨ (try-catch)
- ì½”ë“œ íë¦„ì´ ëª…í™•

## 3.2 async í•¨ìˆ˜

```dart
Future<String> fetchData() async {
  await Future.delayed(Duration(seconds: 1));
  return 'ë°ì´í„°';
}
```

- `async` í‚¤ì›Œë“œë¡œ ë¹„ë™ê¸° í•¨ìˆ˜ í‘œì‹œ
- `Future<T>` ë°˜í™˜ íƒ€ì…
- `await` ì‚¬ìš© ê°€ëŠ¥

## 3.3 await ì‚¬ìš©

```dart
String data = await fetchData();
```

- Futureê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°
- ì™„ë£Œë˜ë©´ ê²°ê³¼ ë°˜í™˜
- `async` í•¨ìˆ˜ ë‚´ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥

---

# -------------------------------------------
# 4. ì—¬ëŸ¬ Future ì²˜ë¦¬
# -------------------------------------------

## 4.1 ìˆœì°¨ ì‹¤í–‰

```dart
String data1 = await fetchData1();
String data2 = await fetchData2();
```

- í•˜ë‚˜ì”© ìˆœì„œëŒ€ë¡œ ì‹¤í–‰
- ì²« ë²ˆì§¸ê°€ ëë‚˜ì•¼ ë‘ ë²ˆì§¸ ì‹œì‘
- ì´ ì‹œê°„ = ê°ê°ì˜ ì‹œê°„ í•©

## 4.2 ë³‘ë ¬ ì‹¤í–‰

```dart
var results = await Future.wait([
  fetchData1(),
  fetchData2(),
  fetchData3(),
]);
```

- ë™ì‹œì— ì—¬ëŸ¬ Future ì‹¤í–‰
- ëª¨ë“  Futureê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°
- ì´ ì‹œê°„ = ê°€ì¥ ì˜¤ë˜ ê±¸ë¦¬ëŠ” Future ì‹œê°„

**ì–¸ì œ ì‚¬ìš©?**
- ìˆœì°¨: ë‘ ë²ˆì§¸ê°€ ì²« ë²ˆì§¸ ê²°ê³¼ì— ì˜ì¡´í•  ë•Œ
- ë³‘ë ¬: ë…ë¦½ì ì¸ ì‘ì—…ë“¤ì¼ ë•Œ

---

# -------------------------------------------
# 5. Future.delayed
# -------------------------------------------

## 5.1 ê¸°ë³¸ ì‚¬ìš©

```dart
await Future.delayed(Duration(seconds: 2));
print('2ì´ˆ í›„ ì‹¤í–‰');
```

- ì§€ì •ëœ ì‹œê°„ í›„ ì™„ë£Œë˜ëŠ” Future
- íƒ€ì´ë¨¸, ì§€ì—° ì‹¤í–‰ì— ì‚¬ìš©

## 5.2 í™œìš© ì˜ˆì‹œ

```dart
print('ì‹œì‘');
await Future.delayed(Duration(seconds: 1));
print('1ì´ˆ í›„');
await Future.delayed(Duration(seconds: 1));
print('2ì´ˆ í›„');
```

---

# -------------------------------------------
# 6. ì—ëŸ¬ ì²˜ë¦¬
# -------------------------------------------

## 6.1 try-catch ì‚¬ìš©

```dart
try {
  String data = await fetchData();
  print('ì„±ê³µ: $data');
} catch (e) {
  print('ì—ëŸ¬: $e');
}
```

- ë™ê¸° ì½”ë“œì™€ ë™ì¼í•œ ë°©ì‹
- ê°„ë‹¨í•˜ê³  ëª…í™•

## 6.2 catchError ì‚¬ìš©

```dart
fetchData()
  .then((data) => print('ì„±ê³µ: $data'))
  .catchError((error) => print('ì—ëŸ¬: $error'));
```

- then/catchError íŒ¨í„´
- ì²´ì´ë‹ ê°€ëŠ¥

## 6.3 ì—ëŸ¬ ë°œìƒ

```dart
Future<String> fetchData() async {
  throw Exception('ì—ëŸ¬ ë°œìƒ!');
}
```

- `throw`ë¡œ ì—ëŸ¬ ë°œìƒ
- FutureëŠ” ìë™ìœ¼ë¡œ ì—ëŸ¬ë¥¼ ì „íŒŒ

---

# -------------------------------------------
# 7. Future.valueì™€ Future.error
# -------------------------------------------

## 7.1 Future.value

```dart
Future<String> immediate = Future.value('ì¦‰ì‹œ ê°’');
String value = await immediate;
```

- ì´ë¯¸ ê°’ì„ ê°€ì§€ê³  ìˆëŠ” Future
- ì¦‰ì‹œ ì™„ë£Œë¨
- í…ŒìŠ¤íŠ¸ë‚˜ ê¸°ë³¸ê°’ì— ìœ ìš©

## 7.2 Future.error

```dart
Future<String> error = Future.error('ì—ëŸ¬!');
try {
  await error;
} catch (e) {
  print(e);
}
```

- ì—ëŸ¬ë¥¼ ê°€ì§„ Future
- ì¦‰ì‹œ ì—ëŸ¬ ë°œìƒ

---

# -------------------------------------------
# 8. Future.timeout
# -------------------------------------------

## 8.1 íƒ€ì„ì•„ì›ƒ ì„¤ì •

```dart
String result = await fetchData().timeout(
  Duration(seconds: 2),
  onTimeout: () => 'íƒ€ì„ì•„ì›ƒ!',
);
```

- ì§€ì •ëœ ì‹œê°„ ë‚´ì— ì™„ë£Œë˜ì§€ ì•Šìœ¼ë©´ íƒ€ì„ì•„ì›ƒ
- `onTimeout`: íƒ€ì„ì•„ì›ƒ ì‹œ ì‹¤í–‰í•  í•¨ìˆ˜

## 8.2 ì‚¬ìš© ì˜ˆì‹œ

```dart
try {
  String data = await slowFetch().timeout(
    Duration(seconds: 5),
  );
} catch (e) {
  print('íƒ€ì„ì•„ì›ƒ ë˜ëŠ” ì—ëŸ¬: $e');
}
```

---

# -------------------------------------------
# ğŸ¯ ì‹¤ì „ ì˜ˆì œ
# -------------------------------------------

## ì˜ˆì œ 1: ì‚¬ìš©ì ë°ì´í„° ë¡œë“œ

```dart
Future<User> loadUserData(int userId) async {
  await Future.delayed(Duration(seconds: 1));
  
  // API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜
  Map<String, dynamic> data = {
    'id': userId,
    'name': 'Alice',
    'email': 'alice@example.com',
  };
  
  return User.fromMap(data);
}
```

## ì˜ˆì œ 2: ì—¬ëŸ¬ API í˜¸ì¶œ

```dart
Future<void> loadMultipleData() async {
  var results = await Future.wait([
    fetchUserProfile(),
    fetchUserPosts(),
    fetchUserFriends(),
  ]);
  
  // ëª¨ë“  ë°ì´í„° ë¡œë“œ ì™„ë£Œ
}
```

## ì˜ˆì œ 3: ì—ëŸ¬ ì²˜ë¦¬ì™€ ì¬ì‹œë„

```dart
Future<String> fetchWithRetry(int retries) async {
  for (int i = 0; i < retries; i++) {
    try {
      return await fetchData();
    } catch (e) {
      if (i == retries - 1) rethrow;
      await Future.delayed(Duration(seconds: 1));
    }
  }
  throw Exception('ëª¨ë“  ì¬ì‹œë„ ì‹¤íŒ¨');
}
```

---

# -------------------------------------------
# âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸
# -------------------------------------------

ì´ ë‹¨ê³„ë¥¼ ì™„ë£Œí–ˆë‹¤ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

- [ ] Futureì˜ ê°œë…ì„ ì´í•´í–ˆìŠµë‹ˆë‹¤
- [ ] async/awaitë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- [ ] then/catchErrorë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- [ ] ì—¬ëŸ¬ Futureë¥¼ ìˆœì°¨/ë³‘ë ¬ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- [ ] ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- [ ] Future.delayedë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- [ ] Future.timeoutì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- [ ] ì‹¤ì „ì—ì„œ ë¹„ë™ê¸° ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

---

# -------------------------------------------
# ğŸš€ ì‹¤í–‰ ë°©ë²• ë° ê²°ê³¼ í™•ì¸
# -------------------------------------------

ìì„¸í•œ ì‹¤í–‰ ë°©ë²•ì€ [Run.md](Run.md) íŒŒì¼ì„ ì°¸ê³ í•˜ì„¸ìš”.

**ë¹ ë¥¸ ì‹¤í–‰:**
```bash
cd ch01_dart_basic
dart run lib/ch07_ë¹„ë™ê¸°í”„ë¡œê·¸ë˜ë°/main.dart
```

---

# -------------------------------------------
# ğŸ“ ë‹¤ìŒ ë‹¨ê³„
# -------------------------------------------

07ë‹¨ê³„ë¥¼ ì™„ë£Œí–ˆë‹¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•˜ì„¸ìš”:
- **08ë‹¨ê³„: í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°** - ëŒë‹¤, ê³ ì°¨ í•¨ìˆ˜

## ğŸ“š ì „ì²´ ì»¤ë¦¬í˜ëŸ¼

1. âœ… **01ë‹¨ê³„: ê¸°ë³¸ ë¬¸ë²•** - ë³€ìˆ˜, íƒ€ì…, í•¨ìˆ˜
2. âœ… **02ë‹¨ê³„: ì œì–´ë¬¸** - if/else, switch, for/while
3. âœ… **03ë‹¨ê³„: ì»¬ë ‰ì…˜** - List, Map, Set
4. âœ… **04ë‹¨ê³„: Null Safety** - null ì•ˆì „ ì²˜ë¦¬
5. âœ… **05ë‹¨ê³„: í´ë˜ìŠ¤ì™€ ê°ì²´** - í´ë˜ìŠ¤, ìƒì„±ì, ìƒì†
6. âœ… **06ë‹¨ê³„: ì œë„¤ë¦­** - íƒ€ì… íŒŒë¼ë¯¸í„°
7. âœ… **07ë‹¨ê³„: ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°** - Future, async/await (í˜„ì¬ ë‹¨ê³„)
8. â­ï¸ **08ë‹¨ê³„: í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°** - ëŒë‹¤, ê³ ì°¨ í•¨ìˆ˜

---

# -------------------------------------------
# ğŸ’¡ íŒ
# -------------------------------------------

1. **async/await vs then**
   - ê°„ë‹¨í•œ ì½”ë“œ: async/await ê¶Œì¥
   - ë³µì¡í•œ ì²´ì´ë‹: thenë„ ìœ ìš©
   - ëŒ€ë¶€ë¶„ async/awaitê°€ ë” ì½ê¸° ì‰¬ì›€

2. **ì„±ëŠ¥ ìµœì í™”**
   - ë…ë¦½ì ì¸ ì‘ì—…ì€ ë³‘ë ¬ ì‹¤í–‰
   - Future.waitë¡œ ì—¬ëŸ¬ ì‘ì—… ë™ì‹œ ì²˜ë¦¬
   - ë¶ˆí•„ìš”í•œ await í”¼í•˜ê¸°

3. **ì—ëŸ¬ ì²˜ë¦¬**
   - í•­ìƒ ì—ëŸ¬ ì²˜ë¦¬ ê³ ë ¤
   - try-catchê°€ ë” ëª…í™•
   - íƒ€ì„ì•„ì›ƒ ì„¤ì • ê¶Œì¥

4. **Flutterì—ì„œì˜ í™œìš©**
   - API í˜¸ì¶œ: async/await
   - íŒŒì¼ I/O: Future ì‚¬ìš©
   - íƒ€ì´ë¨¸: Future.delayed
   - ìœ„ì ¯ ë¹Œë“œ: FutureBuilder ì‚¬ìš©

