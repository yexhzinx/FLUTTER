# ë‹¨ê³„ 6: í™ˆ í™”ë©´ êµ¬í˜„

## ğŸ¯ ëª©í‘œ
ë¡œê·¸ì¸ í›„ ì‚¬ìš©ì ì •ë³´ë¥¼ í‘œì‹œí•˜ê³  ë¡œê·¸ì•„ì›ƒí•  ìˆ˜ ìˆëŠ” í™ˆ í™”ë©´ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

## ğŸ“ ì‘ì—… ë‚´ìš©

### 6.1 HomeScreen ìœ„ì ¯ ìƒì„±

`lib/screens/home_screen.dart` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

```dart
import 'package:flutter/material.dart';
import '../services/auth_service.dart';

class HomeScreen extends StatefulWidget {
  const HomeScreen({super.key});

  @override
  State<HomeScreen> createState() => _HomeScreenState();
}

class _HomeScreenState extends State<HomeScreen> {
  final _authService = AuthService();
  Map<String, dynamic>? _userInfo;
  bool _isLoading = true;

  @override
  void initState() {
    super.initState();
    // í™”ë©´ì´ ë¡œë“œë  ë•Œ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    _loadUserInfo();
  }

  // ì‚¬ìš©ì ì •ë³´ ë¡œë“œ í•¨ìˆ˜
  Future<void> _loadUserInfo() async {
    final userInfo = await _authService.getUserInfo();
    setState(() {
      _userInfo = userInfo;
      _isLoading = false;
    });
  }

  // ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ í•¨ìˆ˜
  Future<void> _handleLogout() async {
    // ë¡œê·¸ì•„ì›ƒ API í˜¸ì¶œ
    await _authService.logout();
    
    // í™”ë©´ì´ ì•„ì§ ë§ˆìš´íŠ¸ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
    if (mounted) {
      // ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™
      Navigator.pushReplacementNamed(context, '/login');
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('í™ˆ'),
        actions: [
          // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼
          IconButton(
            icon: const Icon(Icons.logout),
            onPressed: _handleLogout,
            tooltip: 'ë¡œê·¸ì•„ì›ƒ',
          ),
        ],
      ),
      body: _isLoading
          ? const Center(child: CircularProgressIndicator())
          : _userInfo == null
              ? const Center(child: Text('ì‚¬ìš©ì ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤'))
              : Padding(
                  padding: const EdgeInsets.all(16.0),
                  child: Column(
                    crossAxisAlignment: CrossAxisAlignment.start,
                    children: [
                      Text(
                        'ì‚¬ìš©ì ì •ë³´',
                        style: Theme.of(context).textTheme.headlineSmall,
                      ),
                      const SizedBox(height: 16),
                      Card(
                        child: Padding(
                          padding: const EdgeInsets.all(16.0),
                          child: Column(
                            crossAxisAlignment: CrossAxisAlignment.start,
                            children: [
                              Text(
                                'ì‚¬ìš©ìëª…: ${_userInfo!['username']}',
                                style: const TextStyle(fontSize: 16),
                              ),
                              const SizedBox(height: 8),
                              Text(
                                'ê¶Œí•œ: ${_userInfo!['role']}',
                                style: const TextStyle(fontSize: 16),
                              ),
                            ],
                          ),
                        ),
                      ),
                    ],
                  ),
                ),
    );
  }
}
```

## ğŸ“– ì½”ë“œ ì„¤ëª…

### ì£¼ìš” ê¸°ëŠ¥

1. **initState()**: í™”ë©´ì´ ì²˜ìŒ ë¡œë“œë  ë•Œ ì‹¤í–‰
   - `_loadUserInfo()` í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°

2. **_loadUserInfo()**: ì‚¬ìš©ì ì •ë³´ ë¡œë“œ
   - `AuthService.getUserInfo()` í˜¸ì¶œ
   - ë¡œë”© ìƒíƒœ ê´€ë¦¬ (`_isLoading`)
   - ì‚¬ìš©ì ì •ë³´ ì €ì¥ (`_userInfo`)

3. **_handleLogout()**: ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
   - `AuthService.logout()` í˜¸ì¶œ
   - ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™

### UI êµ¬ì„±

1. **AppBar**: ìƒë‹¨ ë°”
   - ì œëª©: "í™ˆ"
   - ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ (ìš°ì¸¡ ìƒë‹¨)

2. **ë¡œë”© ìƒíƒœ**: `CircularProgressIndicator` í‘œì‹œ
   - ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ì¼ ë•Œ

3. **ì‚¬ìš©ì ì •ë³´ í‘œì‹œ**: Card ìœ„ì ¯ ì‚¬ìš©
   - ì‚¬ìš©ìëª…
   - ê¶Œí•œ (ROLE_USER, ROLE_ADMIN ë“±)

### ìƒíƒœ ê´€ë¦¬

- `_isLoading`: ë¡œë”© ìƒíƒœ
- `_userInfo`: ì‚¬ìš©ì ì •ë³´ (Map í˜•íƒœ)

## âœ… í™•ì¸ ì‚¬í•­
- [ ] `lib/screens/home_screen.dart` íŒŒì¼ì´ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸
- [ ] ì‚¬ìš©ì ì •ë³´ê°€ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
- [ ] ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸

## ğŸ” ë¬¸ì œ í•´ê²°

### ì‚¬ìš©ì ì •ë³´ê°€ í‘œì‹œë˜ì§€ ì•ŠëŠ” ê²½ìš°
- ë°±ì—”ë“œ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
- ì¿ í‚¤ì— í† í°ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
- API ì‘ë‹µ í™•ì¸ (ë°±ì—”ë“œ ë¡œê·¸ í™•ì¸)

### ë¡œê·¸ì•„ì›ƒì´ ì‘ë™í•˜ì§€ ì•ŠëŠ” ê²½ìš°
- `AuthService.logout()` ë©”ì„œë“œ í™•ì¸
- ë„¤ë¹„ê²Œì´ì…˜ ë¼ìš°íŠ¸ í™•ì¸

## ğŸ“š ë‹¤ìŒ ë‹¨ê³„
ë‹¤ìŒ ë‹¨ê³„ì—ì„œëŠ” ë¼ìš°íŒ…ì„ ì„¤ì •í•©ë‹ˆë‹¤.
â†’ [ë‹¨ê³„7: ë¼ìš°íŒ… ì„¤ì •](./ë‹¨ê³„7_ë¼ìš°íŒ…_ì„¤ì •.md)

